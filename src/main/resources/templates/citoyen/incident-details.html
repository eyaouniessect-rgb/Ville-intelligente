<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <title>D√©tails Incident</title>

    <style>
        body {
            font-family:'Segoe UI';
            background: linear-gradient(135deg,#667eea,#764ba2);
            padding:20px;
        }

        /* ------- HEADER (identique √† Mes Incidents) ------- */
        .header {
            background:white; padding:20px; border-radius:10px;
            margin-bottom:20px;
            display:flex; justify-content:space-between; align-items:center;
            box-shadow:0 4px 6px rgba(0,0,0,0.1);
        }

        .user-info {
            display:flex; align-items:center; gap:15px;
        }

        .user-badge {
            background: linear-gradient(135deg,#667eea,#764ba2);
            color:white; padding:8px 16px;
            border-radius:20px; font-weight:bold;
        }

        .btn {
            padding:10px 18px; border-radius:8px;
            text-decoration:none; color:white;
            font-weight:bold; transition:0.3s;
        }

        .btn:hover { opacity:0.85; }

        .back-btn { background:#3b82f6; }
        .logout-btn { background:#ef4444; border:none; cursor:pointer; }

        /* ------- CARD DETAILS ------- */
        .card {
            background:white; padding:30px; border-radius:12px;
            max-width:900px; margin:0 auto;
            box-shadow:0 4px 6px rgba(0,0,0,.1);
        }

        .label { font-weight:bold; color:#6b7280; }
        .value { margin-bottom:12px; display:inline-block; }

        .photo {
            width:140px; border-radius:8px;
            margin:10px 10px 0 0;
            box-shadow:0 2px 4px rgba(0,0,0,.2);
        }
    </style>
</head>

<body>

<!-- ===== HEADER (m√™me navbar que Mes Incidents) ===== -->
<div class="header">
    <h1>üìå D√©tails de l'incident</h1>

    <div class="user-info">
        <span class="user-badge" sec:authentication="principal.username"></span>

        <a th:href="@{/citoyen/incidents}" class="btn back-btn">‚¨ÖÔ∏è Retour √† mes incidents</a>

        <form th:action="@{/logout}" method="post" style="margin:0;">
            <button class="btn logout-btn">D√©connexion</button>
        </form>
    </div>
</div>

<!-- ===== CONTENT ===== -->
<div class="card">

    <p><span class="label">Cat√©gorie :</span>
        <span class="value" th:text="${incident.categorie}"></span>
    </p>

    <p><span class="label">Description :</span>
        <span class="value" th:text="${incident.description}"></span>
    </p>

    <p><span class="label">Statut :</span>
        <span class="value" th:text="${incident.statut}"></span>
    </p>

    <p><span class="label">Adresse :</span>
        <span class="value" th:text="${incident.adresse}"></span>
    </p>

    <p><span class="label">Date d√©claration :</span>
        <span class="value" th:text="${incident.dateDeclaration}"></span>
    </p>

    <p><span class="label">Derni√®re mise √† jour :</span>
        <span class="value" th:text="${incident.dateDerniereMiseAJour}"></span>
    </p>

    <p><span class="label">Date r√©solution estim√©e :</span>
        <span class="value" th:text="${incident.dateResolutionEstimee}"></span>
    </p>

    <h3>üì∏ Photos</h3>
    <div th:each="ph : ${incident.photos}">
        <img class="photo" th:src="@{'/uploads/' + ${ph.nomFichier}}"/>
    </div>

</div>

</body>
</html>
