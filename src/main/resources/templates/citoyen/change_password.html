<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Changer mot de passe</title>

    <style>
        * { margin:0; padding:0; box-sizing:border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg,#667eea,#764ba2);
            min-height:100vh;
            display:flex;
            justify-content:center;
            align-items:center;
            padding:20px;
        }

        .container {
            max-width:600px;
            width:100%;
        }

        .card {
            background:white;
            border-radius:15px;
            padding:35px;
            box-shadow:0 10px 40px rgba(0,0,0,0.2);
        }

        .header {
            display:flex;
            justify-content:space-between;
            align-items:center;
            margin-bottom:25px;
        }

        .header h1 {
            color:#667eea;
            font-size:26px;
            display:flex;
            align-items:center;
            gap:10px;
        }

        .back-link {
            color:#667eea;
            text-decoration:none;
            font-weight:500;
        }

        .back-link:hover {
            text-decoration:underline;
        }

        .alert {
            padding:14px;
            border-radius:8px;
            margin-bottom:20px;
            font-weight:500;
        }

        .alert-error {
            background:#fee2e2;
            color:#991b1b;
            border:1px solid #fecaca;
        }

        .alert-success {
            background:#d1fae5;
            color:#065f46;
            border:1px solid #a7f3d0;
        }

        .form-group {
            margin-bottom:20px;
        }

        .form-group label {
            display:block;
            margin-bottom:8px;
            color:#374151;
            font-weight:500;
        }

        .form-group input {
            width:100%;
            padding:12px;
            border-radius:8px;
            border:2px solid #e5e7eb;
            font-size:14px;
        }

        .form-group input:focus {
            outline:none;
            border-color:#667eea;
        }

        .hint {
            font-size:13px;
            color:#6b7280;
            margin-top:5px;
        }

        .submit-btn {
            width:100%;
            margin-top:10px;
            padding:14px;
            border:none;
            border-radius:8px;
            background:linear-gradient(135deg,#10b981,#059669);
            color:white;
            font-size:16px;
            font-weight:bold;
            cursor:pointer;
            transition:0.3s;
        }

        .submit-btn:hover {
            opacity:0.9;
            transform:translateY(-2px);
            box-shadow:0 6px 15px rgba(16,185,129,0.4);
        }
    </style>
</head>

<body>

<div class="container">
    <div class="card">

        <!-- Header -->
        <div class="header">
            <h1>üîê Changer mot de passe</h1>
            <a th:href="@{/citoyen/profil}" class="back-link">
                ‚Üê Retour profil
            </a>
        </div>

        <!-- FORMULAIRE -->
        <form th:action="@{/citoyen/change-password}"
              th:object="${passwordDto}"
              method="post">

            <!-- ERREURS GLOBALES -->
            <div th:if="${#fields.hasGlobalErrors()}"
                 class="alert alert-error">
                <p th:each="err : ${#fields.globalErrors()}"
                   th:text="${err}"></p>
            </div>

            <!-- MESSAGE SUCC√àS -->
            <div th:if="${success}"
                 class="alert alert-success"
                 th:text="${success}">
            </div>

            <div class="form-group">
                <label for="ancienMotDePasse">
                    Ancien mot de passe *
                </label>
                <input type="password"
                       id="ancienMotDePasse"
                       th:field="*{ancienMotDePasse}"
                       placeholder="Entrez votre ancien mot de passe"
                       required>
            </div>

            <div class="form-group">
                <label for="nouveauMotDePasse">
                    Nouveau mot de passe *
                </label>
                <input type="password"
                       id="nouveauMotDePasse"
                       th:field="*{nouveauMotDePasse}"
                       placeholder="Entrez un nouveau mot de passe"
                       required>
                <div class="hint">
                    Minimum 12 caract√®res, avec majuscule, minuscule, chiffre et caract√®re sp√©cial
                </div>
            </div>

            <div class="form-group">
                <label for="confirmationMotDePasse">
                    Confirmer le nouveau mot de passe *
                </label>
                <input type="password"
                       id="confirmationMotDePasse"
                       th:field="*{confirmationMotDePasse}"
                       placeholder="Confirmez le nouveau mot de passe"
                       required>
            </div>

            <button type="submit" class="submit-btn">
                üíæ Enregistrer le nouveau mot de passe
            </button>

        </form>

    </div>
</div>

</body>
</html>
